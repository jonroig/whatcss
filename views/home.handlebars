
<div class="jumbotron">
  <div class="card bg-dark">
    <div class="card-header">
      <h1 style="color: white; text-align: center">WhatCSS is Your Page Using?</h1>
    </div>
    <div class="card-body bg-dark">
      <form action="/getcss" method="GET">
        <div class="form-group">
          <input
            type="text"
            name="page"
            class="form-control"
            id="exampleFormControlInput1"
            placeholder="https://whatcss.info"
          >
          <input type="hidden" name="exclude" value="www.facebook.com,platform.twitter.com,www.google.com,apis.google.com" />
        </div>
        <div style="text-align: right">
          <button type="submit" class="btn btn-primary mb-2">Analyse</button>
        </div>
      </form>
    </div>
  </div>
</div>

{{#if config.screenshotsArchive.active}}
  <div class="card">
    <div class="card-header">
      <h2>Recent</h2>
    </div>
    <div class="card-body" style="overflow-x: scroll; overflow-y: hidden; height: 325px;">
      <div class="container-fluid">
        <div class="row flex-row flex-nowrap">
          {{#each screenshotArray}}
            <div class="col-10 col-sm-4 col-md-4 col-lg-3">
              <div class="card card-block">
                <img src="/img/{{id}}" style="height: 180px;" title="{{thePage}} CSS analysis">
                <div class="card-body">
                  <h5 class="card-title" style="overflow: hidden; height: 22px;">
                    <a href="/getcss?page={{urlEncodedPage}}">{{thePage}}</a>
                  </h5>
                  <p class="card-text">
                    Original CSS Size: {{originalSize}}<br/>
                    <strong>BootCSS: {{newSize}} ({{percentage}}%)</strong>
                  </p>
                </div>
              </div>
            </div>
          {{/each}}
        </div>
      </div>
    </div>
{{/if}}

<br/>
<div class="card" id="what">
  <div class="card-header">
    <h2>WhatCSS: Shrink Your Initial CSS Pageload by up to 94%?</h2>
  </div>
  <div class="card-body">
    <p>
      Most of the CSS you deliver to the client on each page load is useless.
    </p>
    <p>
      <strong>WhatCSS.info</strong> is a free, opensource CSS page load analyser
      and optimizer.
      Brought to you by your friends at
      <a href="https://i❤️.ws" title="Emoji Domains">i❤️.ws emoji domains</a>,
      the app allows you to easily see what CSS styles are required to
      display your site.
    </p>
    <p>
      <strong>WhatCSS.info automatically generates a minified version of the bare minimum
      CSS a user needs to begin interacting with your site.</strong>
      Dramatically shrink WordPress, Shopify, and Bootstrap themes!
      Decrease load time! <a
        href="https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery"
        title="Google PageSpeed Insights Guide to Optimizing CSS Delivery"
      >Optimize CSS delivery</a> for SEO!
    </p>
    <p>
      Wasteful delivery of CSS is bringing you down.
    </p>
    <p>
      Why make users wait?
    </p>
  </div>
</div>

<br/>
<div class="card" id="how">
  <div class="card-header">
    <h2>How Does WhatCSS Work?</h2>
  </div>
  <div class="card-body">
    <p>
      WhatCSS is essentially a wrapper of an instance of Chrome running
      on a remote server.
    </p>
    <p>
      Chrome DevTools already captures CSS usage, but the browser lacks the ability to easily
      output and make sense of results. WhatCSS uses
      <a
        href="https://github.com/GoogleChrome/puppeteer"
        title="Puppeteer: Headless Chrome Node API">Puppeteer</a>,
      Google's Headless Chrome Node API, to control a remote browser instance, navigate to
      a site, and return which stylesheets are in use when the page is fully loaded.
      ("domcontentloaded" for the nerds.)
    </p>
    <p>
      WhatCSS.info takes those results from Chrome, applies extra minification
      with
      <a
        href="https://github.com/jakubpawlowicz/clean-css"
        title"Clean-CSS CSS Minification">clean-css</a>,
      and <strong>returns BootCSS: the essential style information a visitor needs
      to view your site.</strong>
    </p>
  </div>
</div>

<br/>
<div class="card" id="usage">
  <div class="card-header">
    <h2>WhatCSS Usage</h2>
  </div>
  <div class="card-body">
    <p>
      That's up to you.
    </p>
    <p>
      Armed with the minified BootCSS -- often a tiny fraction of the size of
      your site's total CSS load, especially if you're using a WordPress or
      Bootstrap theme -- it's trivial to just load the styles you need, defer the
      rest of the CSS until after the page renders.
    </p>
    <p>
      In some cases -- a simple site like
      <a href="https://WhatCSS.info" title="What CSS Does My Site Need At Load?">WhatCSS.info</a>
      -- the BootCSS is all the site needs to be fully functional. With only 5% of the
      original CSS from the standard Bootstrap 4 distribution needed to use the site,
      we just put the CSS inline.
    </p>
    <p>
      Good enough for a technology demo, maybe doesn't quite meet your actual needs.
    </p>
    <p>
      There's an example of how to do this in the next section, but an easy
      variation of this might be to <strong>inline the BootCSS and defer the
      load of the rest of the CSS</strong>. This way, the page becomes immediately
      interactive, but the styles needed for additional exploration
      come along shortly thereafter.
    </p>
    <p>
      This approach also alleviates the need to make any hard choices when it comes
      to cutting CSS, especially if you're just loading some random theme off a CDN.
    </p>
    <p>
      With WhatCSS having an API/CLI and being opensource and whatnot,
      it can be integrated to a build process,
      automating the BootCSS generation.
    </p>
    <p>
      More sophisticated users might want to divide their CSS into two parts,
      the first, the BootCSS, essential for displaying the site, and then the
      rest of the stuff. With both files on a CDN, the second can be safely
      deferred... or even sub divided into tiny, chunked deferred pieces.
    </p>
  </div>
</div>

<br/>
<div class="card" id="optimize">
  <div class="card-header">
    <h2>1-2-3: How We Optimized WhatCSS.info</h2>
  </div>
  <div class="card-body">
    <p>
      Like all things SEO, we followed the
      <a
        href="https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery"
        title="Google PageSpeed Insights Guide to Optimizing CSS Delivery"
      >Google PageSpeed Insights Guide to Optimizing CSS Delivery</a>.
    </p>
    <p>
      (View the source of this page to see an example.)
    </p>
    <ol>
      <li>
        Determine what stylesheets are being used from the Bootstrap CDN.
        <br/>
        <code>
          https://whatcss.info/getcss?page=https://whatcss.info&include=stackpath.bootstrapcdn.com&exclude=inline
        </code>
      </li>
      <li>
        Insert the BootCSS into the HEAD of the document.
        The resulting CSS was 4.48% of the original size of Bootstrap.
      </li>
      <li>
        Defer Bootstrap using the <a
          href="https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery"
          title="Google PageSpeed Insights Guide to Optimizing CSS Delivery"
        >Google CSS Optimization JavaScript example</a>.
      </li>
    </ol>
    <p>
      Easy enough, right? Took about 5 mins... made a huge difference.
    </p>
  </div>
</div>
<br/>

<br/>
<div class="card" id="api">
  <div class="card-header">
    <h2>WhatCSS API</h2>
  </div>
  <div class="card-body">
    <p>
      Given that WhatCSS.info is itself a wrapper around an API, it's appropriate
      that there should be an API to that API.
    </p>
    <p>
      Pretty straightforward: just append "&format=json" to the URL
      and it'll... return JSON.
    </p>
    <code>
      https://whatcss.info/getcss?page=https://whatcss.info&format=json
    </code>
    <br/>
  </div>
</div>


<br/>
<div class="card" id="api">
  <div class="card-header">
    <h2>WhatCSS CLI</h2>
  </div>
  <div class="card-body">
    <p>
      You can run WhatCSS from the command line, but you've got
      to hop over to
      <a
        href="https://github.com/jonroig/whatcss"
        title="WhatCSS: Critical Path CSS analyser on Github"
      >github.com/jonroig/whatcss</a> to get it.
    </p>
    <p>
      You'll have to have Nodejs on your machine and do the standard
      <code>npm install</code>.
    </p>
    <p>
      Example usage:<br/>
      <code>
        node whatcss https://whatcss.info -i stackpath.bootstrapcdn.com,facebook.com -e inline
      </code>
    </p>
    <p>
      Output is a bunch of JSON. If you elect to take a screenshot, it'll
      return in PNG/base64 as part of the JSON package.
    </p>
  </div>
</div>


<br/>
<div class="card" id="filters">
  <div class="card-header">
    <h2>WhatCSS Filters</h2>
  </div>
  <div class="card-body">
    <p>
      Since WhatCSS grabs all the CSS currently in use by your browser, the API
      provides a way to either explicitly include or ignore CSS stylesheets
      from different origins.
    </p>
    <p>
      For instance, CSS from Facebook, Twitter,
      or Google is almost always rendered by a custom component... and since
      that's out of your control, optimizing that CSS might be best left
      to the vendor who included that CSS. (Or, for that matter, those styles
      might not interfere with your page load at all.)
    </p>
    <p>
      <strong>include/exclude:</strong> comma separated list of domains or 'inline'
      <br/>
    </p>
    <code>
      https://whatcss.info/getcss?page=https://whatcss.info&include=stackpath.bootstrapcdn.com,facebook.com&exclude=inline
    </code>
  </div>
</div>
<br/>

<br/>
<div class="card" id="contact">
  <div class="card-header">
    <h2>Contact Us</h2>
  </div>
  <div class="card-body">
    <p>
      Twitter: <a href="https://twitter.com/emoji_domains" title="Emoji Domains on Twitter">@emoji_domains</a><br/>
      Github: <a href="https://github.com/jonroig/whatcss" title="WhatCSS.info: CSS StyleSheet Pageload Analyser/Optimizer on Github">github.com/jonroig/whatcss</a>
    </p>
  </div>
</div>
<br/>
